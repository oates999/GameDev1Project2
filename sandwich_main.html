<html>
<head>
	<meta charset="UTF-8" />
	<title>Sandwich Game Placeholder Title</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
	<style text="text/css">
		body {
			margin: 0;
		}
	</style>
</head>

<body>
<script type="text/javascript">

//Global Variables
var game = new Phaser.Game(750, 1334, Phaser.AUTO, '',
	{preload: preload, create: create, update: update});
var wheel;							//wheel object
var leftTween;						//wheel rotation left
var rightTween;					//wheel rotation right
var tween_duration = 200;		//duration of tween (ms)
var x_on_start;					//data storage for swipe detect
var x_on_stop;
var y_on_start;
var y_on_stop;

//Temporary Variables
var key1;
var key2;

function preload () {
	game.load.image("wheel_sprite", "assets/images/placeholder/placeholder_wheel.png");
}

function create() {
	game.physics.startSystem(Phaser.Physics.ARCADE);
	game.input.mouse.capture = true;

	//Creation and positioning of the wheel
	wheel = game.add.sprite(0, 0, "wheel_sprite");
	wheel.inputEnabled = true;
	wheel.width = 700;
	wheel.height = 700;
	wheel.anchor.set(0.5, 0.5);
	wheel.x = game.width/2;
	wheel.y = game.height;
	wheel.angle -= 45;

	//Defining of the wheel-spin tweens
	leftTweenAlpha = game.add.tween(wheel).to({angle: "-110"}, tween_duration, Phaser.Easing.Quadratic.InOut);
	leftTweenBeta = game.add.tween(wheel).to({angle: "-20"}, tween_duration, Phaser.Easing.Quadratic.InOut);
	rightTweenAlpha = game.add.tween(wheel).to({angle: "+110"}, tween_duration, Phaser.Easing.Quadratic.InOut);
	rightTweenBeta = game.add.tween(wheel).to({angle: "+20"}, tween_duration, Phaser.Easing.Quadratic.InOut);
	leftTweenAlpha.chain(rightTweenBeta);
	rightTweenAlpha.chain(leftTweenBeta);

	//Defining function call when mouse is clicked/released
	game.input.onDown.add(onClick, this);
	game.input.onUp.add(onRelease, this);
}

function update() {

}

//Function called on left-click start
function onClick() {
	x_on_start = game.input.mousePointer.x;
	y_on_start = game.input.mousePointer.y;
}
//Function called on left-click release
function onRelease() {
	x_on_stop = game.input.mousePointer.x;
	y_on_stop = game.input.mousePointer.y;
	var distX = x_on_stop - x_on_start;
	var distY = y_on_stop - y_on_start;
	//Swipe was horizontal (distX more that twice as large as distY)
	if (Math.abs(distX) > Math.abs(distY)*2 && Math.abs(distX) > 10) {
		//Left Swipe
		if (distX < 0) {
			if (wheel.angle % 90 === 45 || wheel.angle % 90 === -45)
				leftTweenAlpha.start();
		}
		//Right Swipe
		else {
			if (wheel.angle % 90 === 45 || wheel.angle % 90 === -45)
				rightTweenAlpha.start();
		}
	}
}

</script>
</body>
</html>